- name: Install asdf
  ansible.builtin.git:
    repo: "https://github.com/asdf-vm/asdf.git"
    dest: "{{ lookup('env', 'HOME') }}/.asdf"
    single_branch: yes
    version: v0.8.1
  become_user: "{{ ansible_user_id }}"
  tags:
    - install
    - asdf

- name: Install asdf ruby plugin
  shell: sh -c asdf plugin add ruby https://github.com/asdf-vm/asdf-ruby.git
  tags:
    - plugins
    - asdf

- name: Install asdf nodejs plugin
  shell: sh -c asdf plugin add nodejs https://github.com/asdf-vm/asdf-nodejs.git
  tags:
    - plugins
    - asdf

- name: Install nodejs lts
  shell: asdf install nodejs lts
  tags:
    - plugins
    - asdf

- name: Set nodejs lts global
  shell: asdf global nodejs lts
  tags:
    - plugins
    - asdf

- name: Install ruby 2.5.1
  shell: asdf install ruby 2.5.1
  tags:
    - plugins
    - asdf

- name: Set ruby 2.5.1 global
  shell: asdf global ruby 2.5.1
  tags:
    - plugins
    - asdf
